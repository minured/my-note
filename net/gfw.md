<!-- @format -->

### GFW 一般手段

1. dns 污染
2. tcp 重置攻击,篡改服务返回结果
3. 猜想 是否可以自己定义一种协议,只有自己使用,不容易被 gfw 识别
4. gfw 处理能被动接受加密数据外,还能对翻墙机发起 主动探测
   1. 通过一些手段来检查机器是否运行了 ss 服务
   2. 重放攻击,gfw会拿我们的数据包再发送给代理机, 为了了解机器上运行了什么服务

### 网络结构

1. 应用层 http,处理具体数据包
2. 传输层 tcp/udp,添加端口
3. 网络层 添加 ip
4. 数据链路层 处理物理地址 mac
5. 物理层 物理连接
6. 本地路由器会做端口和 ip 的映射,nat
7. 路由器是三层设置,可以处理应用层一下的数据
8. 交换机则尽可以处理,物理层和数据链路层的数据

### 代理手段

1. vpn openvpn 具有明显的流量特征
2. shadowsocks,既可以加密又有不明显的流量特征


### shadowsocks
1. 测试,裸奔的ss协议已经可以被gfw识别,它通过重放数据包识别了ss服务,代理机上日志输出来自gfw的请求,并认证失败
   1. 也有人用同样协议没有被识别到,推测是gfw重点关注了某些ip段来探测
   2. 在特殊时期梯子可能会挂掉,因为gfw扩大了探测的范围
2. ss协议引入了plugin功能(主要流量伪装)
   1. 通过插件吧数据伪装成普通的http或websocket的流量,欺骗gfw
   2. ssr节点就是类似 加了插件的ss节点
   3. ssr有混淆参数和协议参数,其中混淆参数是ss的插件可以实现的功能
   4. ssr独有的协议参数,主要是用来做用户认证的
   5. ssr已不再更新了,现在有更好的替代选择


### trojan 天生将数据伪装成https流量的协议
1. f



### 协议常识
1. tls(传输层安全协议),ssl(安全套接层)是tls的前身. 1994年网景推出首版https,以ssl进行加密,这是ssl的起源
2. 当前tls1.3(2018),数据传输广泛使用,成为互联网保密通讯的工业标准
3. 简单理解  https = http + tls
4. tls协议
   1. 网站证书
   2. CA机构 申请证书
   3. 公钥 私钥,非对称加密
5. 进行https访问的时候,会先跟目标服务器建立tls连接,目标服务器会把网站证书发给你(包含公钥)
6. 本机浏览器对证书进行校验(颁发机构,颁发的目标网站,有效期等)
7. 从tls回包中拿到密钥,对即将发送数据进行加密
   1. 这里浏览器并不是直接拿服务器的公钥进行非对称加密
   2. 而是与服务器协商(扩展)之后,拿到一个对称加密的密钥进行加密
   3. 总之,不是所有数据都进行非对称加密,大大减少加解密的时间
8. 目标服务器的域名信息, sni 在tls1.2中不加密, 在tls1.3中加密,叫做esni


### 常用命令
1. `dpkg -L [nginx]`,查看包在哪些目录下创建了什么文件
2. 